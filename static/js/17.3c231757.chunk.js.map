{"version":3,"sources":["utils/form_validation_util.jsx","../node_modules/reactstrap/es/Alert.js","../node_modules/reactstrap/es/UncontrolledAlert.js","components/AddImage/Components/index.js","components/AddImage/index.js"],"names":["max","min","required","value","undefined","minValue18","email","test","aol","renderInputField","input","label","type","htmlFor","meta","touched","error","warning","className","placeholder","renderSelectField","optionValues","renderInputCurrencyField","renderCheckbox","id","propTypes","children","PropTypes","node","string","closeClassName","closeAriaLabel","cssModule","object","color","fade","bool","isOpen","toggle","func","tag","tagPropType","transition","shape","Fade","innerRef","oneOfType","defaultProps","_objectSpread2","unmountOnExit","Alert","props","Tag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","closeClasses","alertTransition","baseClass","timeout","React","createElement","_extends","in","role","onClick","UncontrolledAlert","_Component","_this","call","this","state","bind","_assertThisInitialized","_inheritsLoose","_proto","prototype","setState","render","Component","fileType","GalleryForm","handleSubmitForm","formData","dispatch","saveFormData","FormData","uploadFile","uploadInput","files","append","length","size","includes","actionSubmit","imageName","validateUpload","event","history","push","returnPage","handleSubmit","initialValues","pristine","reset","submitting","Form","onSubmit","FormGroup","Field","name","component","validate","ref","Button","disabled","cancelAddImage","reduxForm","form","AddImage","imagePreviewUrl","file","Blob","uploadStatus","fromPage","failureMesg","timer","handleUploadData","validateUploadData","imageType","saveImage","setTimeout","clearInterval","failedMessage","location","HeaderCrumb","title","LoadingImage","Object","assign","password","Card","CardBody","CardTitle","connect","store","imageInfo","Image","uploadSingleImage"],"mappings":"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","file":"static/js/17.3c231757.chunk.js","sourcesContent":["import React from 'react';\n\nimport {\n    Label,\n    Input,\n    CustomInput\n  } from 'reactstrap';\n\n\nexport const required = value => value ? undefined : 'Required'\nexport const maxLength = max => value =>\n  value && value.length > max ? `Must be ${max} characters or less` : undefined\nexport const maxLength15 = maxLength(15)\nexport const number = value => value && isNaN(Number(value)) ? 'Must be a number' : undefined\nexport const minValue = min => value =>\n  value && value < min ? `Must be at least ${min}` : undefined\nexport const minValue18 = minValue(18)\nexport const email = value =>\n  value && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value) ?\n  'Invalid email address' : undefined\nexport const tooOld = value =>\n  value && value > 65 ? 'You might be too old for this' : undefined\nexport const aol = value =>\n  value && /.+@aol\\.com/.test(value) ?\n  'Really? You still use AOL for your email?' : undefined\n\nexport const renderInputField = ({ input, label, type, htmlFor, meta: { touched, error, warning } }) => (\n    <div className=\"form-valid\">\n        <Label htmlFor={htmlFor}>{label}</Label>\n        <Input\n        {...input} placeholder={label} type={type}\n        />\n        {touched && ((error && <span> {error}</span>) || (warning && <span> {warning}</span>))}\n        \n    </div>\n)\n\nexport const renderSelectField = ({ input, label, type, htmlFor, optionValues, meta: { touched, error, warning } }) => (\n  <div className=\"form-valid\">\n      <Label htmlFor={htmlFor}>{label}</Label>\n      <Input\n      {...input} placeholder={label} type={type}\n      >{optionValues}</Input>\n      {touched && ((error && <span> {error}</span>) || (warning && <span> {warning}</span>))}\n      \n  </div>\n)\n\nexport const renderInputCurrencyField = ({ input, label, type, meta: { touched, error, warning } }) => (\n  <div className=\"form-valid\">\n      <Input\n      {...input} placeholder={label} type={type}\n      />\n      {touched && ((error && <span> {error}</span>) || (warning && <span> {warning}</span>))}\n      \n  </div>\n)\n\nexport const renderCheckbox = ({ input, label, type, className, id, meta: { touched, error, warning } }) => (\n  <div className=\"form-valid\">\n      <CustomInput\n      {...input} className={className} type={type} label={label} id={id}\n      />\n  </div>\n)\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _objectSpread2 from \"@babel/runtime/helpers/esm/objectSpread\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nimport Fade from './Fade';\nvar propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  closeClassName: PropTypes.string,\n  closeAriaLabel: PropTypes.string,\n  cssModule: PropTypes.object,\n  color: PropTypes.string,\n  fade: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  toggle: PropTypes.func,\n  tag: tagPropType,\n  transition: PropTypes.shape(Fade.propTypes),\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  color: 'success',\n  isOpen: true,\n  tag: 'div',\n  closeAriaLabel: 'Close',\n  fade: true,\n  transition: _objectSpread2({}, Fade.defaultProps, {\n    unmountOnExit: true\n  })\n};\n\nfunction Alert(props) {\n  var className = props.className,\n      closeClassName = props.closeClassName,\n      closeAriaLabel = props.closeAriaLabel,\n      cssModule = props.cssModule,\n      Tag = props.tag,\n      color = props.color,\n      isOpen = props.isOpen,\n      toggle = props.toggle,\n      children = props.children,\n      transition = props.transition,\n      fade = props.fade,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"closeClassName\", \"closeAriaLabel\", \"cssModule\", \"tag\", \"color\", \"isOpen\", \"toggle\", \"children\", \"transition\", \"fade\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'alert', \"alert-\" + color, {\n    'alert-dismissible': toggle\n  }), cssModule);\n  var closeClasses = mapToCssModules(classNames('close', closeClassName), cssModule);\n\n  var alertTransition = _objectSpread2({}, Fade.defaultProps, {}, transition, {\n    baseClass: fade ? transition.baseClass : '',\n    timeout: fade ? transition.timeout : 0\n  });\n\n  return React.createElement(Fade, _extends({}, attributes, alertTransition, {\n    tag: Tag,\n    className: classes,\n    in: isOpen,\n    role: \"alert\",\n    innerRef: innerRef\n  }), toggle ? React.createElement(\"button\", {\n    type: \"button\",\n    className: closeClasses,\n    \"aria-label\": closeAriaLabel,\n    onClick: toggle\n  }, React.createElement(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\")) : null, children);\n}\n\nAlert.propTypes = propTypes;\nAlert.defaultProps = defaultProps;\nexport default Alert;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React, { Component } from 'react';\nimport Alert from './Alert';\n\nvar UncontrolledAlert =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(UncontrolledAlert, _Component);\n\n  function UncontrolledAlert(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.state = {\n      isOpen: true\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UncontrolledAlert.prototype;\n\n  _proto.toggle = function toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  };\n\n  _proto.render = function render() {\n    return React.createElement(Alert, _extends({\n      isOpen: this.state.isOpen,\n      toggle: this.toggle\n    }, this.props));\n  };\n\n  return UncontrolledAlert;\n}(Component);\n\nexport default UncontrolledAlert;","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\n\nimport {\n    Form,\n    Label,\n    FormGroup,\n    Input,\n    Button,\n    InputGroup,\n    InputGroupAddon\n  } from 'reactstrap';\n\nimport {renderInputField, renderCheckbox, renderSelectField, renderInputCurrencyField, required, email, aol, minValue18} from '../../../utils/form_validation_util';\n\n\n\nconst fileSize = \"5000000\"; // 5MB\nconst fileType = [\"image/jpeg\", \"image/tiff\", \"image/png\"];\n\nclass GalleryForm extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.handleSubmitForm.bind(this);\n    }\n\n    handleSubmitForm (formData, dispatch) {\n\n        const saveFormData = new FormData();\n        var uploadFile = this.uploadInput.files[0];\n        saveFormData.append('files', uploadFile);\n  \n        if (this.uploadInput.files.length != 0 && uploadFile.size < fileSize && fileType.includes(uploadFile.type)) {\n            this.props.actionSubmit(saveFormData, formData.imageName);\n        } else {\n            this.props.validateUpload();\n        }\n        \n    }\n\n    cancelAddImage(event) {\n        this.props.history.push('/'+ this.props.returnPage);\n    }\n\n    render() {\n\n        let {\n            handleSubmit, pristine, reset, initialValues, submitting \n        } = this.props;\n        \n        if (initialValues != null) {\n            \n            return (\n                \n                <Form onSubmit={handleSubmit(this.handleSubmitForm.bind(this))}>\n\n                    <FormGroup>\n                        <Field name=\"imageName\" type=\"name\" id=\"imageName\"\n                        htmlFor=\"imageName\"\n                        component={renderInputField} label=\"Image Name\"\n                        validate={[ required ]}\n                        />\n                    </FormGroup>\n\n                    <FormGroup>\n                        <input ref={(ref) => { this.uploadInput = ref; }} type=\"file\" />\n                        <span>(only files .jpeg/.tiff/.png are supported.)</span>\n                    </FormGroup>\n                    <Button color=\"primary\" className=\"mt-1\"  type=\"submit\" disabled={submitting}>\n                        Save\n                    </Button>\n                    <Button size=\"sm\" color=\"link\" className=\"btn-link-primary\" onClick={this.cancelAddImage.bind(this)}>\n                        Cancel\n                    </Button>\n                </Form>\n\n            )\n        } else {\n            return null;\n        }\n\n    }\n}\n\nexport default reduxForm({\n  form: 'galleryForm' // a unique identifier for this form\n})(GalleryForm)","import React, { Fragment, Component } from 'react';\nimport { connect } from 'react-redux'\n\nimport { uploadSingleImage } from '../../actions/image_actions';\n\nimport {\n  CardBody,\n  Card,\n  CardTitle,\n  UncontrolledAlert\n} from 'reactstrap';\n\nimport HeaderCrumb from '../../layout-components/HeaderCrumb';\nimport LoadingImage from '../../layout-components/LoadingImage';\n\nimport GalleryForm from './Components/index';\n\nconst mapStateToProps = (store) => ({\n  imageInfo: store.Image\n});\n\nconst mapDispatchToProps = dispatch => ({\n  saveImage: (formData, imageType, imageName) => dispatch(uploadSingleImage(formData, imageType, imageName)),\n});\n\nclass AddImage extends Component {\n\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      imagePreviewUrl: null,\n      file: Blob,\n      uploadStatus: false,\n      fromPage: null,\n\n      failureMesg: false,\n      isOpen: true,\n      timer: null\n    };\n\n    this.handleUploadData = this.handleUploadData.bind(this);\n    this.validateUploadData = this.validateUploadData.bind(this);\n  }\n\n  handleUploadData (formData, imageName) {\n    \n    let imageType = this.state.fromPage == 'Gallery' ? 'GALLERY' : 'LANDING_PAGE'\n    this.props.saveImage(formData, imageType, imageName);\n    this.setState({\n      uploadStatus: true\n    });\n    setTimeout(() => {\n      this.props.history.push('/'+this.state.fromPage, { state: 'success'});\n    }, 8000)\n  }\n\n  validateUploadData () {\n    \n    this.setState({\n      failureMesg: true\n    });\n    const timer = setTimeout(() => {\n      this.setState({\n        isOpen: false\n      });\n    }, 3000);\n    this.setState({ timer: timer });\n\n    this.state.isOpen = true;\n  }\n\n\n  componentWillUnmount() {\n\t\tclearInterval(this.state.timer);\n\t}\n  \n  render() {\n    const { state } = this.props.location;\n\n    if (state != undefined) {\n      this.state.fromPage = state.fromPage;\n    }\n\n    let failedMessage;\n    if (this.state.failureMesg) {\n      failedMessage = (<UncontrolledAlert color=\"danger\" isOpen={this.state.isOpen}>\n                            Upload file is off the limit (or) file type is not .jpeg/.tiff/.png;\n                          </UncontrolledAlert>\n                        );\n  }\n\n\n    if (this.state.uploadStatus) {\n      return (\n        <div>\n          <HeaderCrumb title=\"Add Image\" />\n          <h1>Please wait .....Image Loading</h1>\n          <LoadingImage />\n        </div>\n      );\n    } else if (!this.state.uploadStatus) {\n      let initialValues = Object.assign({}, { name: '', password: '' });\n        return (\n          <Fragment>\n            <HeaderCrumb title=\"Add Image\" />\n                <Card className=\"card-box mb-5\">\n                  <CardBody>\n                    {failedMessage}\n                    <CardTitle className=\"font-weight-bold font-size-lg mb-4\">\n                      Add New Image\n                    </CardTitle>\n                    <GalleryForm {...this.props} \n                      actionSubmit={this.handleUploadData} \n                      validateUpload={this.validateUploadData} \n                      initialValues = {initialValues} \n                      returnPage ={this.state.fromPage}/>\n                  </CardBody>\n                </Card>\n          </Fragment>\n        );\n    }\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(AddImage);"],"sourceRoot":""}